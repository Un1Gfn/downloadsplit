# https://circleci.com/docs/2.0/language-android/#sample-configuration
# https://github.com/shadowsocks/shadowsocks-android/blob/master/.circleci/config.yml

# root@f199f32871af:~# df -h
# Filesystem      Size  Used Avail Use% Mounted on
# none            826G  272G  554G  33% /
# tmpfs            64M     0   64M   0% /dev
# tmpfs            35G     0   35G   0% /sys/fs/cgroup
# /dev/nvme1n1p1  9.7G  2.5G  7.3G  26% /dev/init
# /dev/nvme0n1    826G  272G  554G  33% /etc/hosts
# shm              30G     0   30G   0% /dev/shm
# udev             35G     0   35G   0% /dev/tty
# tmpfs            35G     0   35G   0% /proc/acpi
# tmpfs            35G     0   35G   0% /proc/scsi
# tmpfs            35G     0   35G   0% /sys/firmware

version: 2
jobs:
  build:
    # https://circleci.com/docs/2.0/configuration-reference/#environment
    # environment:
    #   L:  'https://'
    #   H:  'ffffffffffffffffffffffffffffffff'
    #   F:  'xxx.7z'
    #   C:  'xxxsum.txt'
    working_directory: ~/code
    docker:
      # https://circleci.com/docs/2.0/circleci-images/
      # https://github.com/CircleCI-Public/circleci-dockerfiles/tree/master/android/images
      # https://en.wikipedia.org/wiki/Debian_version_history
      # https://wiki.ubuntu.com/Releases
      # - image: ubuntu:hirsute # 21.04 # https://stackoverflow.com/q/66319610
      - image: ubuntu:focal     # 20.04.2 LTS
    resource_class: medium
    steps:
      # - run:
      #     name: Stop for SSH
      #     command: |
      #       false
      - run:
          name: Prepare
          command: |
            apt update
            apt install -y curl wget
      - run:
          name: Download
          command: |
            # lsb_release -a # /bin/bash: lsb_release: command not found
            cd ~
            # https://superuser.com/questions/426877
            # https://addons.mozilla.org/en-US/firefox/search/?q=wget
            # https://addons.mozilla.org/en-US/firefox/addon/cliget
            # curl/wget ... --cookie '...' ... --output 'Final Fantasy X (Japan).7z'
            curl --header 'Host: files.romspure.com' --user-agent 'Mozilla/5.0 (X11; Linux x86_64; rv:89.0) Gecko/20100101 Firefox/89.0' --header 'Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8' --header 'Accept-Language: en-US,en;q=0.5' --header 'Content-Type: application/x-www-form-urlencoded' --header 'Origin: https://files.romspure.com' --referer 'https://files.romspure.com/PS2/NTSC-Asia/Final%20Fantasy%20X%20%28Japan%29.7z?token=' --cookie 'cf_chl_2=4da08baecb76e8c; cf_chl_prog=a11; cf_clearance=6f59df8f559879e2066a38e10819242d7467d846-1623603704-0-150' --header 'Upgrade-Insecure-Requests: 1' --request POST --data-urlencode 'r=f18a0d6983b8013e371e6a16cdad836f444152f7-1623603960-0-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' --data-urlencode 'jschl_vc=623d36b01ae257011602ba4d0771d72e' --data-urlencode 'pass=1623603964.594-dZ5hrpiXpQ' --data-urlencode 'jschl_answer=lJlzbswcKvLy-11-65ece831ad58e7f5' --data-urlencode 'cf_ch_verify=plat' 'https://files.romspure.com/PS2/NTSC-Asia/Final%20Fantasy%20X%20%28Japan%29.7z?token=&__cf_chl_jschl_tk__=ef97becacb8a49ef700067dddfa36113a33974bc-1623603960-0-AQ856jXnOWUIow-ODj_uqa2_tJUFnGjRvJebXcaymcgpy3V4svSz7zxNvonenrelP7FMK8Alrbhcm5upLriquy8dR37GTcdgW86jca_fAP644aShLqReHJ3FpWSMahcBTpZSLBkvWbbunGvAnqqJq-tfbehblt2kKLk8szaYo4yMwuA2-B6iCCWvBV5XgP7X8bA2OpCwLutfclF0fNNSC85K_YwoW3H6ar2pCesUKzN7MUkcxLoOhzLv7F-wN_bmGHnWJ7VUXDq8_NyUfSKVRuKgggtAcyR1dPp8GlT_aoxjOIuWgknEgn6jn5YXGcahc55XOE6vow5sGJ_J7fs0LZlXJ1aoMoTxd2Lug5CQjymVGEaTYZLK8v0yt1xUzc4hFBNUzue1ZJPTXIqJlURDPYqo_gktMvE3qPCRH2nArMcsYUrmeuV07yg8LybqyDpECxypV6jfhLjxNYlJFBiSLd8' --output 'Final Fantasy X (Japan).7z'
      - run:
          name: Split
          command: |
            cd ~
            mkdir split
            cd split
            split --verbose -b $((1024*1024*1024)) ~/'Final Fantasy X (Japan).7z'
            ls -l
            ls -lh
      - run:
          name: Checksum
          command: |
            cd ~/split
            sha1sum * | tee sha1sum.txt
            sha1sum ../'Final Fantasy X (Japan).7z' | tee -a sha1sum.txt
            # cat sha1sum.txt | tr -s ' ' >"sha1sum.txt".onespace
          # no_output_timeout: 30m
          # no_output_timeout: 1.5h
      - store_artifacts:
          # https://circleci.com/docs/2.0/artifacts/#artifacts-overview
          path: ~/split/
          destination: split